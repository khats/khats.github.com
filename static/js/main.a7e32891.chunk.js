(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{13:function(e,t,n){e.exports={easy:"styles_easy__PNmw3",normal:"styles_normal__1y7ap",hard:"styles_hard__1Hrn7",nightmare:"styles_nightmare__3REa9"}},15:function(e,t,n){e.exports={makeDecision:"styles_makeDecision__1hwdq"}},16:function(e,t,n){e.exports=n(23)},23:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(12),o=n.n(l),c=n(1),s=n(2),i=n(4),u=n(3),f=n(5),p=n(10);function m(e){return r.a.createElement("div",null,"Dev mode:",r.a.createElement("div",null,r.a.createElement("span",null,"Use random decisions")," ",r.a.createElement("input",{type:"checkbox",onChange:e.useAutobot,checked:e.autobotEnabled})),r.a.createElement("div",null,r.a.createElement("span",null,"Stop autobot on unopened cells %: ")," ",r.a.createElement("input",{type:"number",onChange:e.setAutobotPercent,value:e.autobotStopPercent,min:0,max:100})))}function h(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"You lose"),r.a.createElement("button",{onClick:e.restartGame},"Restart"))}var v=n(13),E=n.n(v),d=["easy","normal","hard","nightmare"],g=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).changeLevel=function(e){var t=e.target.value;if(/^[1-9]*$/.test(t)){var a=parseInt(t);n.setState({level:isNaN(a)?"":a})}},n.useAutobot=function(e){n.setState({autobotEnabled:e.target.checked})},n.setAutobotPercent=function(e){n.setState({autobotStopPercent:e.target.value})},n.startGame=function(){n.props.startGame(n.state.level,n.state.autobotEnabled,n.state.autobotStopPercent)},n.startLevel=function(e){n.setState({level:e},(function(){n.startGame()}))},n.state={level:1,autobotEnabled:!1,autobotStopPercent:0},n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){for(var e=this,t=[],n=function(n){var a=n+1;t.push(r.a.createElement("button",{className:E.a[d[n]],onClick:function(){return e.startLevel(a)},key:a},"Level ".concat(a)))},a=0;a<d.length;a++)n(a);return r.a.createElement(r.a.Fragment,null,this.props.loose?r.a.createElement(h,{restartGame:this.props.restartGame}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,t),r.a.createElement("hr",null),r.a.createElement("span",null,"or custom level:"),r.a.createElement("input",{type:"text",placeholder:"1,2,3,4 or other",onChange:this.changeLevel,value:this.state.level}),this.state.level?r.a.createElement("button",{onClick:this.startGame},"Start"):null,r.a.createElement(m,{useAutobot:this.useAutobot,setAutobotPercent:this.setAutobotPercent,autobotEnabled:this.state.autobotEnabled,autobotStopPercent:this.state.autobotStopPercent})))}}]),t}(a.PureComponent),b=n(6),O=n.n(b),y=n(9),j=n.n(y),w=n(7),N=n(8),x=n.n(N),_=n(14),S=n.n(_);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var A=r.a.createElement("g",null),C=r.a.createElement("g",null),F=r.a.createElement("g",null),R=r.a.createElement("g",null),L=r.a.createElement("g",null),G=r.a.createElement("g",null),M=r.a.createElement("g",null),I=r.a.createElement("g",null),D=r.a.createElement("g",null),q=r.a.createElement("g",null),z=r.a.createElement("g",null),B=r.a.createElement("g",null),T=r.a.createElement("g",null),U=r.a.createElement("g",null),W=r.a.createElement("g",null),J=function(e){var t=e.svgRef,n=e.title,a=P(e,["svgRef","title"]);return r.a.createElement("svg",k({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 60 60",style:{enableBackground:"new 0 0 60 60"},xmlSpace:"preserve",ref:t},a),n?r.a.createElement("title",null,n):null,r.a.createElement("polygon",{style:{fill:"#CC4B4C"},points:"52,23.5 10,40 10,22 10,4 "}),r.a.createElement("path",{style:{fill:"#424A60"},d:"M9,0C8.448,0,8,0.447,8,1v3v55c0,0.553,0.448,1,1,1s1-0.447,1-1V4V1C10,0.447,9.552,0,9,0z"}),A,C,F,R,L,G,M,I,D,q,z,B,T,U,W)},K=r.a.forwardRef((function(e,t){return r.a.createElement(J,k({svgRef:t},e))}));n.p;function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var V=r.a.createElement("path",{d:"m44.02 19.98c3.08 3.08 4.98 7.32 4.98 12.02s-1.9 8.94-4.98 12.02-7.32 4.98-12.02 4.98-8.94-1.9-12.02-4.98-4.98-7.32-4.98-12.02 1.9-8.94 4.98-12.02 7.32-4.98 12.02-4.98 8.94 1.9 12.02 4.98zm-11.02 9.02c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5 5-2.24 5-5z",fill:"#ff7043"}),X=r.a.createElement("circle",{cx:28,cy:29,fill:"#4dd0e1",r:5}),Q=r.a.createElement("g",{fill:"#012e52"},r.a.createElement("path",{d:"m28 22c-3.86 0-7 3.141-7 7s3.14 7 7 7 7-3.141 7-7-3.14-7-7-7zm0 10c-1.654 0-3-1.346-3-3s1.346-3 3-3 3 1.346 3 3-1.346 3-3 3z"}),r.a.createElement("path",{d:"m54 30h-3.109c-.381-3.658-1.801-7.088-4.12-9.943l2.202-2.202c.781-.781.781-2.047 0-2.828-.78-.781-2.048-.781-2.828 0l-2.203 2.203c-2.856-2.319-6.286-3.74-9.943-4.12v-3.11c0-1.104-.896-2-2-2s-2 .896-2 2v3.109c-3.658.381-7.087 1.802-9.943 4.12l-2.203-2.203c-.78-.781-2.048-.781-2.828 0-.781.781-.781 2.047 0 2.828l2.202 2.202c-2.318 2.855-3.739 6.285-4.12 9.943h-3.107c-1.104 0-2 .896-2 2s.896 2 2 2h3.109c.381 3.658 1.801 7.088 4.12 9.943l-2.202 2.202c-.781.781-.781 2.047 0 2.828.39.391.902.586 1.414.586s1.024-.195 1.414-.586l2.203-2.203c2.856 2.319 6.286 3.74 9.943 4.12v3.111c0 1.104.896 2 2 2s2-.896 2-2v-3.109c3.658-.381 7.087-1.802 9.943-4.12l2.203 2.203c.39.391.902.586 1.414.586s1.024-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-2.202-2.202c2.318-2.855 3.739-6.285 4.12-9.943h3.107c1.104 0 2-.896 2-2s-.896-2.001-2-2.001zm-11.394 12.605c-2.834 2.834-6.601 4.395-10.606 4.395s-7.772-1.561-10.606-4.395c-2.833-2.833-4.394-6.599-4.394-10.605s1.561-7.772 4.394-10.605c2.834-2.834 6.601-4.395 10.606-4.395s7.772 1.561 10.606 4.395c2.833 2.833 4.394 6.599 4.394 10.605s-1.561 7.772-4.394 10.605z"})),$=function(e){var t=e.svgRef,n=e.title,a=H(e,["svgRef","title"]);return r.a.createElement("svg",Y({id:"Layer",enableBackground:"new 0 0 64 64",height:512,viewBox:"0 0 64 64",width:512,ref:t},a),n?r.a.createElement("title",null,n):null,V,X,Q)},Z=r.a.forwardRef((function(e,t){return r.a.createElement($,Y({svgRef:t},e))}));n.p;function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ne=r.a.createElement("path",{d:"m28 22c-3.86 0-7 3.141-7 7s3.14 7 7 7 7-3.141 7-7-3.14-7-7-7zm0 10c-1.654 0-3-1.346-3-3s1.346-3 3-3 3 1.346 3 3-1.346 3-3 3z"}),ae=r.a.createElement("path",{d:"m54 30h-3.107c-.393-3.741-1.88-7.158-4.129-9.935l2.207-2.208c.781-.781.781-2.048 0-2.828-.781-.781-2.047-.781-2.829 0l-2.207 2.207c-2.777-2.249-6.194-3.736-9.935-4.129v-3.107c0-1.104-.896-2-2-2s-2 .896-2 2v3.107c-3.741.393-7.158 1.88-9.935 4.129l-2.207-2.207c-.781-.781-2.047-.781-2.829 0-.781.78-.781 2.047 0 2.828l2.207 2.208c-2.249 2.777-3.736 6.194-4.129 9.935h-3.107c-1.104 0-2 .896-2 2s.896 2 2 2h3.107c.393 3.741 1.88 7.158 4.129 9.935l-2.207 2.208c-.781.781-.781 2.048 0 2.828.391.391.902.586 1.414.586s1.024-.195 1.415-.586l2.207-2.207c2.777 2.249 6.194 3.736 9.935 4.129v3.107c0 1.104.896 2 2 2s2-.896 2-2v-3.107c3.741-.393 7.158-1.88 9.935-4.129l2.207 2.207c.391.391.902.586 1.415.586.512 0 1.023-.195 1.414-.586.781-.78.781-2.047 0-2.828l-2.207-2.208c2.249-2.777 3.736-6.194 4.129-9.935h3.107c1.104 0 2-.896 2-2s-.896-2-2-2zm-22 17c-8.271 0-15-6.729-15-15s6.729-15 15-15 15 6.729 15 15-6.729 15-15 15z"}),re=function(e){var t=e.svgRef,n=e.title,a=te(e,["svgRef","title"]);return r.a.createElement("svg",ee({id:"Layer",enableBackground:"new 0 0 64 64",height:20,viewBox:"0 0 64 64",width:20,ref:t},a),n?r.a.createElement("title",null,n):null,ne,ae)},le=r.a.forwardRef((function(e,t){return r.a.createElement(re,ee({svgRef:t},e))})),oe=(n.p,function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).open=function(){n.props.open(n.props.i,n.props.j)},n.setFlag=function(e){e.preventDefault(),n.props.setFlag(n.props.i,n.props.j)},n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=S()((e={},Object(w.a)(e,x.a.cell,!0),Object(w.a)(e,x.a.safe,-3===this.props.value),Object(w.a)(e,x.a.opened,this.props.value>=0),e));return r.a.createElement("span",{className:t,onClick:this.open,onContextMenu:this.setFlag},this.props.value>=0?this.props.value:-1===this.props.value?r.a.createElement(K,null):-2===this.props.value?r.a.createElement(le,null):"*"===this.props.value?r.a.createElement(Z,null):" ")}}]),t}(r.a.PureComponent));oe.displayName="Cell";var ce=oe,se=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).open=function(e,t){n.props.open(t,e)},n.setFlag=function(e,t){n.props.setFlag(e,t)},n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.matrix;return r.a.createElement("div",{className:j.a.desk},t.map((function(t,n){return r.a.createElement("div",{key:n,className:j.a.row},t.map((function(t,a){return r.a.createElement(ce,{value:t,key:a,i:n,j:a,open:e.open,setFlag:e.setFlag})})))})))}}]),t}(r.a.PureComponent);se.displayName="Desk",se.propType={matrix:O.a.arrayOf(O.a.arrayOf(O.a.number))};var ie=se,ue=function(e){return"new ".concat(e)},fe="map",pe=function(e,t){return"open ".concat(e," ").concat(t)},me=function(){function e(t,n){Object(c.a)(this,e),this.connection=new WebSocket(t),this.connection.addEventListener("message",(function(e){var t=e.data.split(":"),a=t.splice(0,1)[0];n(a,t.join(":").trim())})),this.connection.addEventListener("open",(function(){n("new","connected")}))}return Object(s.a)(e,[{key:"createGame",value:function(e){this.connection.send(ue(e))}},{key:"getMap",value:function(){this.connection.send(fe)}},{key:"openCell",value:function(e,t){this.connection.send(pe(e,t))}}]),e}(),he={NEW:"new",MAP:"map",OPEN:"open"},ve={CONNECTED:"connected",OK:"OK",LOSE:"You lose",WIN:"You win"};function Ee(e){return e.password?r.a.createElement("div",null,e.password):null}function de(e){return r.a.createElement("div",null,r.a.createElement("span",null,"Mines:"),r.a.createElement("span",null,e.minesCount))}var ge=n(15),be=n.n(ge);function Oe(e){return r.a.createElement(r.a.Fragment,null,e.helpRequired?r.a.createElement("h3",{className:be.a.makeDecision},"Open cell, please! (Can not make decision)"):null)}var ye=[{i:-1,j:-1},{i:-1,j:0},{i:-1,j:1},{i:0,j:1},{i:1,j:1},{i:1,j:0},{i:1,j:-1},{i:0,j:-1}];function je(e,t,n,a){var r,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=[];return ye.forEach((function(c){(r=function(e,t,n,a,r){if(t<0||n<0||t>=e.length||n>=e[t].length)return null;var l=e[t][n];return!a&&isNaN(l)||!isNaN(l)&&(r?l===a:l>=a)?{row:t,cell:n}:null}(e,t+c.i,n+c.j,a,l))&&o.push(r)})),o}var we={FLAG:-1,MINE:-2,REAL_MINE:"*",SAFE_TO_OPEN:-3,UNOPENED:"\u25a1"},Ne=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).resolver=function(e,t){if(e===he.NEW){if(t===ve.CONNECTED)return void n.setState({connected:!0});if(t===ve.OK)return void n.setState({started:!0,matrix:[],helpRequired:!1},(function(){n.state.connection.getMap()}))}if(e===he.MAP){var a=t.split("\n").filter((function(e){return""!==e})).map((function(e){return e.split("")}));return n.state.matrix.length===a.length&&a.forEach((function(e,t){e.forEach((function(e,r){e===we.UNOPENED&&(a[t][r]=n.state.matrix[t][r])}))})),void n.setState({matrix:a,helpRequired:!1})}if(e===he.OPEN){if(t===ve.LOSE)return void n.setState({started:!1});t.startsWith(ve.WIN)&&n.setState({password:t,matrix:[],started:!1})}},n.restartGame=function(){n.setState({matrix:[],started:!1,helpRequired:!1,password:null})},n.startGame=function(e,t,a){n.setState({autobotEnabled:t,autobotStopPercent:a}),n.state.connection.createGame(e)},n.open=function(e,t){n.state.connection.openCell(e,t),n.state.connection.getMap()},n.openList=function(e){e.forEach((function(e){n.state.connection.openCell(e.cell,e.row)})),n.state.connection.getMap()},n.setFlag=function(e,t){var a=n.state.matrix.map((function(e){return Object(p.a)(e)}));a[e][t]=we.FLAG,n.setState({matrix:a})},n.step=function(){var e=[];if(n.state.matrix.forEach((function(t,n){t.forEach((function(t,a){t===we.SAFE_TO_OPEN&&e.push({row:n,cell:a})}))})),e.length)n.openList(e);else{var t=function(e){var t=e.map((function(e){return Object(p.a)(e)}));return t.forEach((function(e,n){return e.forEach((function(e,a){var r=parseInt(e);if(!isNaN(r)&&r>we.FLAG){je(t,n,a).forEach((function(e){t[e.row][e.cell]=we.FLAG}));var l=je(t,n,a,we.FLAG),o=je(t,n,a,we.MINE);l.length>0&&l.length+o.length===r&&l.forEach((function(e){t[e.row][e.cell]=we.MINE})),o.length>0&&o.length===r&&l.length>0&&l.forEach((function(e){t[e.row][e.cell]=we.SAFE_TO_OPEN}))}}))})),t.forEach((function(e,n){return e.forEach((function(e,a){var r=parseInt(e);if(!isNaN(r)&&r>we.FLAG){var l=je(t,n,a,we.FLAG),o=je(t,n,a,we.MINE);o.length>0&&o.length===r&&l.length>0&&l.forEach((function(e){t[e.row][e.cell]=we.SAFE_TO_OPEN}))}}))})),t}(n.state.matrix),a=!1;if(t.forEach((function(e,t){e.forEach((function(e,r){e!==n.state.matrix[t][r]&&(a=!0)}))})),a)return void n.setState({matrix:t});if(n.state.autobotEnabled&&t.every((function(e){return e.every((function(e){return isNaN(e)}))})))return void n.open(Math.round(t[0].length/2),Math.round(t.length/2));if(!n.state.autobotEnabled)return void n.setState({helpRequired:!0});if(n.state.matrix.reduce((function(e,t){return e+t.filter((function(e){return isNaN(e)})).length}),0)<t.length*t[0].length*n.state.autobotStopPercent/100)return void n.setState({autobotEnabled:!1});for(var r=null,l=0,o=0;o<t.length;o++)for(var c=0;c<t[o].length;c++)if(isNaN(t[o][c])){var s=je(t,o,c,we.MINE,!1);s>l&&(l=s,r={row:o,cell:c})}if(r)return void n.open(r.cell,r.row);for(var i=0;i<t.length;i++){for(var u=0;u<t[i].length;u++)if(t[i][u]===we.FLAG){r={row:i,cell:u};break}if(r)break}if(r)return void n.open(r.cell,r.row);n.setState({helpRequired:!0})}},n.state={matrix:[],connection:new me("wss://hometask.eg1236.com/game1/",n.resolver),started:!1,loose:!1,helpRequired:!0,autobotEnabled:!1,password:null,connected:!1},n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){this.state.started&&this.state.matrix.length>0&&(this.state.autobotEnabled||!this.state.helpRequired)&&this.step()}},{key:"render",value:function(){var e=this.state.matrix.reduce((function(e,t){return e+t.filter((function(e){return e===we.MINE})).length}),0),t=this.state.matrix.some((function(e){return e.some((function(e){return e===we.REAL_MINE}))}))&&!this.state.matrix.every((function(e){return e.every((function(e){return e===we.REAL_MINE||!isNaN(e)}))}));return r.a.createElement("div",{className:"App"},r.a.createElement(Ee,{password:this.state.password}),r.a.createElement("hr",null),r.a.createElement(g,{startGame:this.startGame,loose:t,restartGame:this.restartGame}),r.a.createElement("hr",null),this.state.started?r.a.createElement(r.a.Fragment,null,r.a.createElement(de,{minesCount:e}),r.a.createElement(Oe,{helpRequired:this.state.helpRequired})):null,r.a.createElement(ie,{matrix:this.state.matrix,open:this.open,setFlag:this.setFlag}))}}]),t}(r.a.Component);Ne.displayName="App";var xe=Ne;o.a.render(r.a.createElement(xe,null),document.getElementById("root"))},8:function(e,t,n){e.exports={cell:"styles_cell__XNJeH",opened:"styles_opened__3l2M2",safe:"styles_safe__2yXuU"}},9:function(e,t,n){e.exports={desk:"styles_desk__DUIO6",row:"styles_row__DtQBb"}}},[[16,1,2]]]);
//# sourceMappingURL=main.a7e32891.chunk.js.map